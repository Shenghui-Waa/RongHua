<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>放大定格 -> 显字 -> 擦除 -> 覆盖图片</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #f0e6d2;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      position: relative;
      width: 640px;
      height: 1030px;
      border: 1px solid #ddd;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      overflow: hidden;
      user-select: none;
      -webkit-user-drag: none;
    }
    .element {
      position: absolute;
      object-fit: contain;
    }
    .layer1 {/* 第一层图 */
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1);
      width: 100%;
      opacity: 1;
      transform-origin:63% 21.5%;
      transition: transform 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    .text-layer {/* 文字 */
      top: 10%;
      left: 47%;
      transform: translate(-50%, -50%);
      width: 60%;
      z-index: 2;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    .wipe-area {/* 擦除区域*/
      position: absolute;
      top: 25%;
      right: 20%;
      width: 50%;
      height: 40%;
      z-index: 1000; /* 确保在最上层 */
      cursor: crosshair; /*变成十字形*/
      display: none; /* 初始状态为隐藏 */
    }
    .final-overlay {/* 覆盖图 */
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 100;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="rh3/点击光圈后.png" class="element layer1" id="backgroundImage" alt="图层1">
    <img src="rh3/字.png" class="element text-layer" id="textLayer" alt="字">
    <div class="wipe-area" id="wipeArea"></div>
    <img src="rh3/擦除完.jpg" class="final-overlay" id="finalOverlay" alt="擦除完成">
  </div>

  <script> /* 获取元素 */
    const backgroundImage = document.getElementById('backgroundImage');
    const textLayer = document.getElementById('textLayer');
    const wipeArea = document.getElementById('wipeArea');
    const finalOverlay = document.getElementById('finalOverlay');

    let wipeCount = 0;/* 擦除判定 */
    const wipeThreshold = 60;
    let isWiping = false;
    let hasTriggered = false;

    window.addEventListener('load', function() {
      setTimeout(() => {
        backgroundImage.style.transform = 'translate(-50%, -50%) scale(2.75)';/* 背景放大 */
        
        setTimeout(() => {
          textLayer.style.opacity = '1';/* 文字显示 */
         
          wipeArea.style.display = 'block';/* 拆除部分显示 */
        }, 2000);
      }, 100);
    });

    wipeArea.addEventListener('mousedown', (e) => {/* 鼠标擦除 */
      if (e.button === 0) {
        isWiping = true;
        wipeCount = 0;
      }
    });

    wipeArea.addEventListener('mousemove', () => {
      if (isWiping && !hasTriggered) {
        wipeCount++;
        if (wipeCount >= wipeThreshold) {
          showFinalOverlay();
          hasTriggered = true;
        }
      }
    });

    function stopWiping() {
      isWiping = false;
    }
    wipeArea.addEventListener('mouseup', stopWiping);
    wipeArea.addEventListener('mouseleave', stopWiping);

    function showFinalOverlay() {
      setTimeout(() => {
        finalOverlay.style.opacity = '1';
        wipeArea.style.display = 'none';
      }, 300);
    }
  </script>
</body>
</html>